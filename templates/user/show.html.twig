{% extends 'base.html.twig' %}

{% block title %}User
{% endblock %}

{% block body %}
	<div class="d-flex justify-content-center align-items-center">
		<div class="card p-4" style="width: 50%">
			<div class="d-flex align-items-center gap-3">
				<div class="rounded-circle overflow-hidden" style="width: 75px; height: 75px;">
					{% if user.avatar %}
						<img src="{{ asset('uploads/avatars/' ~ user.avatar) }}" alt="Avatar de {{ user.email }}" class="object-fit-cover" style="width: 100%; height: 100%;">
					{% else %}
						<div style="background: #ccc; width: 100%; height: 100%;"></div>
					{% endif %}
				</div>

				<h1 class="card-title fs-5">{{ user.email }}</h1>
			</div>

			<div class="card-body">
				<p class="card-text mt-3 mb-0">
					<span class="text-decoration-underline">Identifiant :</span>
					{{ user.id }}
				</p>

				<p class="card-text">
					<span class="text-decoration-underline">Role(s) :</span>
					{% if user.roles is defined and user.roles is iterable %}
						{% set roles = user.roles %}
						{% if 'ROLE_ADMIN' in roles and 'ROLE_USER' in roles %}
							admin, user
						{% elseif 'ROLE_ADMIN' in roles %}
							admin
						{% elseif 'ROLE_USER' in roles %}
							user
						{% else %}
							Aucun rôle défini
						{% endif %}
					{% endif %}
				</p>

			</div>
		</div>
	</div>

	<div style="padding: 0 4rem; margin-top: 3.5rem" class="d-flex justify-content-between align-center gap-2">
		<button type="button" class="btn btn-primary">
			<a href="{{ path('app_user_edit', {'id': user.id}) }}" class="text-light text-decoration-none">Revenir à la liste</a>
		</button>

		<div class="d-flex align-center gap-2">
			<button type="button" class="btn btn-primary">
				<a href="{{ path('app_user_edit', {'id': user.id}) }}" class="text-light text-decoration-none">Éditer</a>
			</button>

			{{ include('user/_delete_form.html.twig') }}
		</div>
	</div>
{% endblock %}
